import '@testing-library/jest-dom';
import { render } from '@testing-library/react';
import React from 'react';
import { MemoryRouter } from 'react-router-dom';
import TroubleShootingNewPage from '../TroubleShootingNewPage';
import { UserProvider } from '../ModalContext';

const mockModalValue = {
  additionalInfoSteps: [
    {
      templateId: 'TEST_TEMPLATE',
      title: 'Test Title',
      description: 'Test Description'
    }
  ],
  setAdditionalInfoSteps: jest.fn()
};

const renderWithProviders = (ui, { modalValue = mockModalValue } = {}) => {
  return render(
    <MemoryRouter>
      <UserProvider value={modalValue}>
        {ui}
      </UserProvider>
    </MemoryRouter>
  );
};

describe('TroubleShootingNewPage', () => {
  it('renders without crashing', () => {
    const props = {
      functions: {
        handleTroubleShootingAction: jest.fn(),
        handleAction: jest.fn(),
        processTroubleShootingPage: jest.fn()
      },
      values: {
        troubleShootingInfo: {
          ddata: {
            output: {
              pageContent: {
                steps: []
              },
              navHist: []
            }
          }
        }
      }
    };

    renderWithProviders(<TroubleShootingNewPage {...props} />);
  });
});
